!function(){"use strict";var e=document.querySelector(".scan-overview");if(e){var v,g,l=e.getAttribute("data-id"),S=[],h="error",q="finished",b="pending",T="pass",w="pending",L=document.querySelector(".scan-queue-bg-wrap"),_=document.querySelector(".scan-result-bg-wrap"),a=function(){return"{{#each results}}{{>scan-result-item}}{{/each}}"},o=function(e,t){return e+(1===t?"":"s")},H=function(e,t,r,n,s,l){0<t?(e.classList.add("rule-list--failed"),e.innerHTML=t+" "+o(r,t),e.closest(".rule-tile").classList.add("rule-tile--failed")):(e.innerHTML=t+" "+o(r,t),l&&e.classList.add("rule-list--passed"),s&&e.closest(".rule-tile").classList.add("rule-tile--passed"))},M=function(e){if(e.results&&0!==e.results.length){var t,r,n=document.getElementById(e.name),s=n.querySelector(".button-expand-all"),l=n.querySelector(".compiling__loader"),o=(t=e,r=a(),Handlebars.compile(r)(t));if(!s){n.querySelector(".rule-result--category").insertAdjacentHTML("beforeend",'<button title="expand" class="button-expand-all closed">+ expand all</button>')}l.insertAdjacentHTML("beforebegin",o)}},x=function(e){var t=e.updates,r=e.time,n=e.version;t.forEach(function(e){if(e.results){var t,r,n,s,l,o,a,u,i,c,d,m,f,y,p,v=e.rules.every(function(e){return e.status===T}),g=e.rules.every(function(e){return e.status!==w});v&&(t=e,r=document.getElementById(t.name),n=r.querySelector(".compiling__loader"),r.querySelector(".rule-result__message--passed")||(n&&r.removeChild(n),r.insertAdjacentHTML("beforeend","{{>category-pass-message}}"))),e.results=e.results.filter(function(e){return e.status!==T}),M(e),l=v,o=g,a="."+(s=e).name+".errors",u="."+s.name+".warnings",i=s.statistics.errors,c=s.statistics.warnings,d=document.querySelector(a),(m=document.querySelector(u)).innerHTML=c+" Warnings",H(d,i,"Error",s.name,l,o),H(m,c,"Warning",s.name,l,o),e.rules.every(function(e){return e.status!==b})&&(f=e,y=document.getElementById(f.name),(p=y.querySelector(".compiling__loader"))&&y.removeChild(p))}});for(var s=document.querySelectorAll("code"),l=0;l<s.length;l++)hljs.highlightBlock(s[l]);document.querySelector("#total-errors").innerHTML=g.errors,document.querySelector("#total-warnings").innerHTML=g.warnings,document.querySelector(".scan-overview--time .scan-overview__body--purple").innerHTML=r,document.querySelector(".scan-overview--version .scan-overview__body--purple").innerHTML=n},s=function(e){return e&&1===e.length?"0"+e:e},u=function(){try{var e=document.querySelector(".scan-overview--time .scan-overview__body--purple"),t=e.innerHTML.split(":"),r=parseInt(t[0],10),n=parseInt(t[1],10);60<=++n&&(r++,n=0),e.innerHTML=s(r.toString())+":"+s(n.toString())}catch(e){}},E=function(){var e,t,r,n,s={callback:function(e,t){var r,n,s,l,o,a,u,i,c,d,m=t.status===q,f=t.status===h,y=t.status===b;if(g=t.overallStatistics,e)return clearInterval(v),void console.error(e);if(y)L.style.display="block",_.style.display="none";else{L.style.display="none",_.style.display="block",f&&document.querySelector("#results-container").insertAdjacentHTML("beforebegin","{{>scan-error-message}}");var p=((d=t.categories).forEach(function(e){e.results&&(e.results=e.results.filter(function(e){return-1===S.indexOf(e.name)}))}),d);if(x({time:t.time,updates:p,version:t.version}),t.categories.forEach(function(e){e.results&&e.results.forEach(function(e){-1===S.indexOf(e.name)&&S.push(e.name)})}),m||f)return clearInterval(v),i=t.status,(c=document.querySelector(".scan-overview__status")).textContent=i,c.classList.remove("analyzing"),r=t.status,s="failed",l="passed",o=(n=g).errors,a=n.warnings,u="/images/favicon_"+(r!==h&&0===o&&0===a?l:s)+".ico",void document.querySelector('link[rel="icon"]').setAttribute("href",u)}setTimeout(E,5e3)},url:"api/"+l};v||(v=setInterval(u,1e3)),e=s,t=new XMLHttpRequest,r=e.callback,n=e.url,t.open(e.method||"GET",n,!0),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){if(r)return e.dontTransform?r(null,t.responseText):r(null,JSON.parse(t.responseText))}else if(r)return r(t.status,t.responseText);return null},t.send(e.params)};window.history.pushState(null,null,l),function(){for(var e=document.querySelectorAll(".rule-result--details"),t=0;t<e.length;t++)S.push(e[t].id)}(),"none"!==document.querySelector(".scan-queue-bg-wrap").style.display?setTimeout(E,1e4):E()}}();